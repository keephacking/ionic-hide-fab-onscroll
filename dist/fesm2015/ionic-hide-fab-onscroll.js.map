{"version":3,"file":"ionic-hide-fab-onscroll.js.map","sources":["ng://ionic-hide-fab-onscroll/hide-fab-onscroll.directive.ts","ng://ionic-hide-fab-onscroll/hide-fab-onscroll.module.ts"],"sourcesContent":["import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  Renderer2,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n  NgZone\r\n} from \"@angular/core\";\r\nimport { ScrollView } from \"ionic-angular/util/scroll-view\";\r\nimport { Platform, App, DomController, Content } from \"ionic-angular\";\r\n\r\n@Directive({\r\n  selector: \"[hideFabOnscroll]\"\r\n})\r\nexport class HideFabOnscrollDirective implements AfterViewInit, OnDestroy {\r\n  //TODO:constants\r\n  private TOP_THRESHOLD = 56;\r\n  private BOTTOM_THRESHOLD = 10;\r\n  private TRANSITION_DELAY = \"500ms\";\r\n  //TODO: scroll view from the ionic itself for scroll events\r\n  private scroll: ScrollView;\r\n\r\n  // render vars so we aren't scoping new ones each time\r\n  private scrollDir = null;\r\n  private scrollTop = 0;\r\n\r\n  //Content where the fab button is displayed\r\n  @Input(\"hideFabOnscroll\") content: Content;\r\n  // Our fab to hide\r\n  fab: HTMLElement;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    // private platform: Platform,\r\n    private zone: NgZone,\r\n    public plt: Platform,\r\n    private domCtrl: DomController,\r\n    private app: App\r\n  ) {}\r\n\r\n  ngAfterViewInit() {\r\n    //After initializing all the elements , set their transiotn property\r\n    this.initFab();\r\n    // TODO: init the scroll view and enable scroll events\r\n    //then bind the function onScroll\r\n    this.scroll = new ScrollView(this.app, this.plt, this.domCtrl);\r\n    this.scroll.enableEvents();\r\n    this.zone.runOutsideAngular(() => {\r\n      this.scroll.init(\r\n        this.content.getScrollElement(),\r\n        this.content._cTop,\r\n        this.content._cBottom\r\n      );\r\n      this.scroll.onScroll = ev => {\r\n        this.scrollDir = ev.directionY;\r\n        this.scrollTop = ev.scrollTop;\r\n      };\r\n      this.scroll.onScrollStart = ev => {\r\n        this.render(null);\r\n      };\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.scroll && this.scroll.destroy();\r\n  }\r\n\r\n  render(ts) {\r\n    let rAFInt = this.plt.raf(ts => this.render(ts));\r\n    if (this.scroll.isScrolling) {\r\n      this.hideFab(ts);\r\n    } else {\r\n      this.plt.cancelRaf(rAFInt);\r\n    }\r\n  }\r\n  hideFab(timestamp) {\r\n    // GOING UP\r\n    if (this.scrollDir == \"up\" && this.scrollTop > this.BOTTOM_THRESHOLD) {\r\n      this.renderer.setStyle(this.fab, \"opacity\", \"1\");\r\n      this.renderer.setStyle(this.fab, this.plt.Css.transform, \"scale3d(1,1,1)\");\r\n      // GOING DOWN\r\n    } else if (this.scrollDir == \"down\" && this.scrollTop>this.TOP_THRESHOLD) {\r\n      this.renderer.setStyle(this.fab,this.plt.Css.transform, \"scale3d(.1,.1,.1)\");\r\n      this.renderer.setStyle(this.fab, \"opacity\", \"0\");\r\n    }\r\n  }\r\n  initFab() {\r\n    this.fab = this.el.nativeElement;\r\n\r\n    this.renderer.setStyle(\r\n      this.fab,\r\n      this.plt.Css.transition,\r\n      `transform ${this.TRANSITION_DELAY}, opacity ${this.TRANSITION_DELAY}`);\r\n  }\r\n}\r\n","import {NgModule } from '@angular/core';\r\nimport { HideFabOnscrollDirective } from './hide-fab-onscroll.directive';\r\nexport * from \"./hide-fab-onscroll.directive\";\r\n@NgModule({\r\n  declarations: [\r\n    HideFabOnscrollDirective\r\n  ],\r\n  exports:[\r\n    HideFabOnscrollDirective\r\n  ]\r\n})\r\nexport class HideFabOnscrollModule {}\r\n"],"names":[],"mappings":"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"}
