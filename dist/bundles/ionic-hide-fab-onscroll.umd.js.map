{"version":3,"file":"ionic-hide-fab-onscroll.umd.js.map","sources":["ng://ionic-hide-fab-onscroll/hide-fab-onscroll.directive.ts","ng://ionic-hide-fab-onscroll/hide-fab-onscroll.module.ts"],"sourcesContent":["import {\r\n  Directive,\r\n  ElementRef,\r\n  Input,\r\n  Renderer2,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n  NgZone\r\n} from \"@angular/core\";\r\nimport { ScrollView } from \"ionic-angular/util/scroll-view\";\r\nimport { Platform, App, DomController, Content } from \"ionic-angular\";\r\n\r\n@Directive({\r\n  selector: \"[hideFabOnscroll]\"\r\n})\r\nexport class HideFabOnscrollDirective implements AfterViewInit, OnDestroy {\r\n  //TODO:constants\r\n  private TOP_THRESHOLD = 56;\r\n  private BOTTOM_THRESHOLD = 10;\r\n  private TRANSITION_DELAY = \"500ms\";\r\n  //TODO: scroll view from the ionic itself for scroll events\r\n  private scroll: ScrollView;\r\n\r\n  // render vars so we aren't scoping new ones each time\r\n  private scrollDir = null;\r\n  private scrollTop = 0;\r\n\r\n  //Content where the fab button is displayed\r\n  @Input(\"hideFabOnscroll\") content: Content;\r\n  // Our fab to hide\r\n  fab: HTMLElement;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    // private platform: Platform,\r\n    private zone: NgZone,\r\n    public plt: Platform,\r\n    private domCtrl: DomController,\r\n    private app: App\r\n  ) {}\r\n\r\n  ngAfterViewInit() {\r\n    //After initializing all the elements , set their transiotn property\r\n    this.initFab();\r\n    // TODO: init the scroll view and enable scroll events\r\n    //then bind the function onScroll\r\n    this.scroll = new ScrollView(this.app, this.plt, this.domCtrl);\r\n    this.scroll.enableEvents();\r\n    this.zone.runOutsideAngular(() => {\r\n      this.scroll.init(\r\n        this.content.getScrollElement(),\r\n        this.content._cTop,\r\n        this.content._cBottom\r\n      );\r\n      this.scroll.onScroll = ev => {\r\n        this.scrollDir = ev.directionY;\r\n        this.scrollTop = ev.scrollTop;\r\n      };\r\n      this.scroll.onScrollStart = ev => {\r\n        this.render(null);\r\n      };\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.scroll && this.scroll.destroy();\r\n  }\r\n\r\n  render(ts) {\r\n    let rAFInt = this.plt.raf(ts => this.render(ts));\r\n    if (this.scroll.isScrolling) {\r\n      this.hideFab(ts);\r\n    } else {\r\n      this.plt.cancelRaf(rAFInt);\r\n    }\r\n  }\r\n  hideFab(timestamp) {\r\n    // GOING UP\r\n    if (this.scrollDir == \"up\" && this.scrollTop > this.BOTTOM_THRESHOLD) {\r\n      this.renderer.setStyle(this.fab, \"opacity\", \"1\");\r\n      this.renderer.setStyle(this.fab, this.plt.Css.transform, \"scale3d(1,1,1)\");\r\n      // GOING DOWN\r\n    } else if (this.scrollDir == \"down\" && this.scrollTop>this.TOP_THRESHOLD) {\r\n      this.renderer.setStyle(this.fab,this.plt.Css.transform, \"scale3d(.1,.1,.1)\");\r\n      this.renderer.setStyle(this.fab, \"opacity\", \"0\");\r\n    }\r\n  }\r\n  initFab() {\r\n    this.fab = this.el.nativeElement;\r\n\r\n    this.renderer.setStyle(\r\n      this.fab,\r\n      this.plt.Css.transition,\r\n      `transform ${this.TRANSITION_DELAY}, opacity ${this.TRANSITION_DELAY}`);\r\n  }\r\n}\r\n","import {NgModule } from '@angular/core';\r\nimport { HideFabOnscrollDirective } from './hide-fab-onscroll.directive';\r\nexport * from \"./hide-fab-onscroll.directive\";\r\n@NgModule({\r\n  declarations: [\r\n    HideFabOnscrollDirective\r\n  ],\r\n  exports:[\r\n    HideFabOnscrollDirective\r\n  ]\r\n})\r\nexport class HideFabOnscrollModule {}\r\n"],"names":["ScrollView","Directive","ElementRef","Renderer2","NgZone","Platform","DomController","App","Input","NgModule"],"mappings":"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"}
